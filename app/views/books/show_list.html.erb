<h2>Selected Books</h2>
<!-- TODO: <button>Print this list!</button>
 <button>Print labels for these books!</button>-->

<table class="index tablesorter">
  <thead>
    <tr>
      <th>Title</th>
      <th>Category</th>
      <th>Author(s)</th>
      <th>Available</th>
    </tr>
  </thead>
  <tbody>
    <% @books.each do |b| %>
      <% missing = "missing" if b.missing %>
      <% on_loan = "on-loan" unless b.available || missing %>
      <% in_storage = "in-storage" if b.in_storage %>
      <tr class="<%= on_loan %>">
      <tr class="<%= missing %>">
        <td>
          <%=  check_box_tag :selected, b.id, b.selected, id: "book-select_#{b.id}"  %>
          <%= link_to b.title, book_path(b.id) %>
        </td>
        <td>
        <% if b.genre %>
          <%= link_to b.genre.name, genre_path(b.genre) %>
        <% end %>
        </td>
        <td>
          <% b.authors.each do |a| %>
            <%= link_to a.display_name, author_path(a) %>
          <% end %>
        </td>
        <td>
          <span class="<%= on_loan %>"></span>
          <span class="<%= in_storage %>"></span>
          <span class="<%= missing %>"></span>
          <!-- icon shows up here if book is on loan/in storage/missing -->
        </td>
      </tr>
      </tr>
    <% end %>
  </tbody>
</table>
<%= will_paginate @books %>
<%= link_to "Loan Books", new_multi_path, id: "new-multi-loan-link", remote: true, class: "go-btn right" if (librarian_user?) %>

<%= button_to "Create Labels", generate_report_path(type: :label, subjects: @books.to_a), class: "go-btn right" if (librarian_user?) %>
